apiVersion: apps/v1
kind: Deployment
metadata:
  name: population
  namespace: amity-population
spec:
  replicas: 1
  selector:
    matchLabels:
      app: population
  template:
    metadata:
      labels:
        app: population
    spec:
      imagePullSecrets:
        - name: harbor-pull-secret
      containers:
        - name: population
          image: registry.vngenterprise.com/k8s/population:dev-02
          #envFrom:
          #  - configMapRef:
          #      name: cfg-path
volumeMounts:
  - name: config-volume
    mountPath: /usr/src/app/src/config.json # destination path inside container
    subPath: config.json # name of the key/file in the Secret
    readOnly: true
volumes:
  - name: config-volume
    secret:
      secretName: population
      items:
        - key: config.json
          path: config.json
