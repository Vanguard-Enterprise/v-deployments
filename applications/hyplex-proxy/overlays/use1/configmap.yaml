apiVersion: v1
kind: ConfigMap
metadata:
  name: hyplex-proxy-config
  namespace: hyplex-proxy
data:
  config.toml: |
    [listener]
    host = "0.0.0.0"
    port = 25565

    [security]
    # proxy_secret is injected via environment variable
    token_ttl_millis = 30000

    [[backends]]
    id = "lobby"
    host = "lobby-service.hyplex.svc.cluster.local"
    port = 25566

    [routing]
    default_backend_id = "lobby"

    [messaging]
    host = "0.0.0.0"
    port = 25568
    enabled = true
