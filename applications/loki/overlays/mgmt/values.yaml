global:
  extraArgs:
  - '-config.expand-env=true'
  extraEnv:
  - name: AWS_ACCESS_KEY_ID
    valueFrom:
      secretKeyRef:
        name: loki-s3
        key: AWS_ACCESS_KEY_ID
  - name: AWS_SECRET_ACCESS_KEY
    valueFrom:
      secretKeyRef:
        name: loki-s3
        key: AWS_SECRET_ACCESS_KEY
read:
  replicas: 1 #scale
  persistence:
    storageClass: longhorn
    size: 1Gi
write:
  replicas: 1 #scale
  persistence:
    storageClass: longhorn
    size: 1Gi
backend:
  replicas: 1 #scale
  persistence:
    storageClass: longhorn
    size: 1Gi
loki:
  auth_enabled: false #requires tenant_id http header
  commonConfig:
    replication_factor: 1 #scale
  schemaConfig:
    configs:
    - from: 2024-04-01
      store: tsdb
      object_store: s3
      schema: v13
      index:
        prefix: index_
        period: 24h #TSDB REQUIRES 24h
      chunks:
        period: 24h #TSDB REQUIRES 24h
  storage:
    bucketNames:
      chunks: loki-chunks
      ruler: loki-ruler
      admin: loki-admin
    type: s3
    s3:
      endpoint: https://s3.vng.bet
      region: us-east-1
      s3ForcePathStyle: true
      #secretAccessKey: X4IxabE6cPlLCbp18Ll5V7vbNhJ0gBzNKs0AmKsP
      #accessKeyId: HIE6uDchmspjOprk0EaT
      accessKeyId: ${AWS_ACCESS_KEY_ID}
      secretAccesskey: ${AWS_SECRET_ACCESS_KEY}
