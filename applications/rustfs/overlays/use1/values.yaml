# RustFS Distributed Configuration
# 4 pods with data PVC each
# Longhorn provides 2x replication at the storage layer

replicaCount: 4

mode:
  standalone:
    enabled: false
  distributed:
    enabled: true

image:
  repository: rustfs/rustfs
  tag: "latest"
  pullPolicy: IfNotPresent

# Distributed volume configuration
config:
  rustfs:
    volumes: "http://rustfs-{0...3}.rustfs-headless:9000/data/rustfs{0...3}"
    address: ":9000"
    console_enable: "true"
    console_address: ":9001"
    log_level: "info"
    region: "us-east-1"

# Credentials from external secret
secret:
  existingSecret: rustfs-secrets

# Storage configuration using Longhorn
storageclass:
  name: longhorn
  dataStorageSize: 20Gi
  logStorageSize: 256Mi

# Disable built-in ingress - we use Traefik IngressRoutes
ingress:
  enabled: false

# Resource limits
resources:
  requests:
    memory: "512Mi"
    cpu: "250m"
  limits:
    memory: "2Gi"
    cpu: "1000m"

# Pod anti-affinity - spread pods across nodes
affinity:
  podAntiAffinity:
    enabled: true
    topologyKey: kubernetes.io/hostname
